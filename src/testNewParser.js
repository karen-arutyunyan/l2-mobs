import axios from 'axios';
import { collectMobStats } from './collectAllMobStats.js';
import fs from 'fs';

/**
 * –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ–¥–Ω–æ–º –º–æ–Ω—Å—Ç—Ä–µ
 */
async function testNewParser() {
  const testNpcId = '21764-dark-omen-invader-elite-soldier';
  
  console.log(`\nüîç –¢–µ—Å—Ç–∏—Ä—É—é –ø–∞—Ä—Å–µ—Ä –Ω–∞ –º–æ–Ω—Å—Ç—Ä–µ: ${testNpcId}`);
  console.log('‚îÅ'.repeat(60));
  
  try {
    const html = await axios.get(`https://wiki1.mw2.wiki/npc/${testNpcId}/live`, {
      timeout: 15000,
      headers: {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
      }
    }).then(r => r.data);

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é collectMobStats –∏–∑ collectAllMobStats.js
    // (–Ω—É–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–∞—á–∞–ª–∞)
    
    console.log('\nüìä –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
    console.log('–ü–∞—Ä—Å–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.\n');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:', error.message);
  }
}

// testNewParser();

// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
console.log(`
‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û

–ü—Ä–æ–±–ª–µ–º–∞:
  –§—É–Ω–∫—Ü–∏–∏ parseDrops() –∏ parseSpoils() –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –ø–æ –í–°–ï–ú —Ç–∞–±–ª–∏—Ü–∞–º 
  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–µ–¥–º–µ—Ç–æ–≤.

–†–µ—à–µ–Ω–∏–µ:
  ‚úì parseDrops() —Ç–µ–ø–µ—Ä—å –∏—â–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ #drop
  ‚úì parseSpoils() —Ç–µ–ø–µ—Ä—å –∏—â–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ #spoil

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  ‚úì "–î—Ä–µ–≤–∫–æ –ü—Ä–æ–Ω–∑–∞—Ç–µ–ª—è –î—É—à NG" —Ç–µ–ø–µ—Ä—å –¢–û–õ–¨–ö–û –≤ spoils
  ‚úì –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É drops –∏ spoils –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–ß—Ç–æ –¥–∞–ª—å—à–µ?
  –ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–æ–Ω—Å—Ç—Ä–æ–≤:
  $ node src/collectAllMobStats.js

–≠—Ç–æ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª-–≤–∞ –º–æ–Ω—Å—Ç—Ä–æ–≤.
`);